# TimeTree Example Configuration
# 8 Animal Species Test Case

# === Input Paths ===
orthofinder_dir: "orthofinder_analysis"
results_dir: "orthofinder_analysis/Results_Jan03"
proteomes_dir: "data/pep"

# === Calibration ===
calibration_table: "calibrations.tsv"
calibration_unit: "Myr"

# === Rooting ===
# Use C. elegans as outgroup (most distant from vertebrates)
outgroup_taxa: ["Drosophila_melanogaster","Caenorhabditis_elegans"]

# === Species Tree Method ===
# "concatenation" - Build supermatrix and infer ML tree (traditional approach)
# "coalescent"    - Build gene trees and use ASTRAL (robust to ILS)
# "custom"        - Use a pre-built rooted tree (skip tree inference)
tree_method: "custom"

# === SCO Filtering ===
sco:
  min_taxa: 6  # Minimum 75% of 8 species
  allow_missing: false

# === Multiple Sequence Alignment ===
msa:
  method: "mafft"
  mafft_opts: "--auto"

# === Trimming ===
trim:
  method: "trimal"
  trimal_opts: "-automated1"

# === IQ-TREE ML Tree ===
iqtree:
  model: "MFP"
  use_partition: true
  bootstrap: 1000
  threads: 64

# === Tool binaries ===
# Notes:
# - IQ2MC step2 REQUIRES IQ-TREE 3 (`iqtree3`) for `--dating mcmctree` as described in:
#   https://iqtree.github.io/doc/Dating
# - For IQ2MC step2, set `iqtree_dating` to `iqtree3` or an absolute path.
binaries:
  iqtree_ml: ""
  iqtree_dating: ""
  mcmctree: "mcmctree"

# === IQ2MC / MCMCtree ===
mcmctree:
  clock_model: "IND"
  burnin: 10000
  samplefreq: 100
  nsample: 20000
  birth_rate: 1.0
  death_rate: 1.0
  sampling_fraction: 0.5

# === Visualization (ggtree) ===
visualization:
  time_unit: "Ma"  # Time unit for axis label: Ma, Myr, kya, etc.

# === Output ===
output_dir: "results/timetree"
work_dir: "work"

# === Coalescent Method (ASTRAL) ===
coalescent:
  gene_tree_model: "MFP"  # Model for gene tree inference, MFP for ModelFinder
  gene_tree_threads: 2    # Threads per gene tree inference
  astral_bin: "astral"    # ASTRAL binary or path to .jar file
  astral_opts: ""         # Extra ASTRAL options, e.g. "-t 2" for scoring
  astral_threads: 4       # Threads for ASTRAL (if supported)

# === Custom Tree (when tree_method="custom") ===
# Provide a pre-built species tree to skip tree inference
# The tree must be:
#   1. In Newick format
#   2. Already rooted (bifurcating root)
#   3. Leaf names must exactly match species names in the orthogroups
# Example:
#   tree_method: "custom"
#   custom_tree:
#     tree_file: "my_species_tree.nwk"
custom_tree:
  tree_file: "species_tree.nwk"  # Pre-built rooted species tree
